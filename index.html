<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ישראל - Mission Control</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --primary: #0066ff; --glass: rgba(255,255,255,0.9); }
        body, html { margin:0; padding:0; height:100%; overflow:hidden; font-family:'Rubik', sans-serif; background:#aad3df; }
        
        #viewport { width:100vw; height:100vh; position:relative; overflow:hidden; cursor:grab; }
        #world-map { position:absolute; transform-origin:0 0; transition: transform 1.2s cubic-bezier(0.2, 1, 0.3, 1); will-change:transform; }
        .map-img { height:100vh; width:auto; display:block; filter: drop-shadow(0 0 20px rgba(0,0,0,0.2)); }

        .dot { 
            position:absolute; width:22px; height:22px; background:#ff3b30; border:3px solid #fff; 
            border-radius:50%; transform:translate(-50%,-50%); cursor:pointer; z-index:10;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3); transition: 0.3s;
        }
        .dot:hover { transform:translate(-50%,-50%) scale(1.4); background:#ffcc00; }
        .dot::after { 
            content: attr(data-label); position:absolute; top:-30px; left:50%; transform:translateX(-50%);
            background:#333; color:#fff; padding:4px 8px; border-radius:4px; font-size:12px; white-space:nowrap; opacity:0;
        }
        .dot:hover::after { opacity:1; }

        #ui { position:absolute; top:20px; right:20px; width:300px; z-index:100; pointer-events:none; }
        .panel { 
            background:var(--glass); padding:20px; border-radius:15px; pointer-events:auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1); backdrop-filter:blur(10px);
        }
        .img-box { height:160px; background-size:cover; background-position:center; border-radius:10px; margin:15px 0; display:none; }
        .controls { display:flex; gap:10px; margin-top:15px; }
        .btn { flex:1; padding:10px; border:1px solid #ddd; background:#fff; border-radius:8px; cursor:pointer; font-weight:700; }
        .btn-main { background:var(--primary); color:#fff; border:none; flex:2; }

        @media (max-width:600px) { #ui { top:auto; bottom:0; right:0; width:100%; } .panel { border-radius:15px 15px 0 0; } }
    </style>
</head>
<body>

<div id="viewport">
    <div id="world-map">
        <img src="https://upload.wikimedia.org/wikipedia/commons/7/77/Israel_relief_location_map.jpg" class="map-img">
        <div id="markers"></div>
    </div>
</div>

<div id="ui">
    <div class="panel">
        <h2 id="title" style="margin:0">מפת ישראל</h2>
        <div id="pic" class="img-box"></div>
        <div id="info" style="font-size:14px; color:#444;">לחץ על נקודה כדי להתחיל</div>
        <div class="controls">
            <button class="btn" onclick="Engine.zoom(1)">+</button>
            <button class="btn" onclick="Engine.zoom(-1)">-</button>
            <button class="btn btn-main" onclick="Engine.reset()">איפוס</button>
        </div>
    </div>
</div>

<script>
const DATA = [
    { id:'jlm', name:'ירושלים', x:53, y:52, pic:'https://images.unsplash.com/photo-1542856391-010fb87dcfed?w=400', txt:'בירת ישראל והעיר הקדושה בעולם.' },
    { id:'tlv', name:'תל אביב', x:40, y:48, pic:'https://images.unsplash.com/photo-1544910731-9755100045e7?w=400', txt:'מרכז הכלכלה, התרבות והבילויים.' },
    { id:'hfa', name:'חיפה', x:48, y:25, pic:'https://images.unsplash.com/photo-1559827260-dc66d52bef19?w=400', txt:'עיר הנמל והגנים הבהאיים.' },
    { id:'elt', name:'אילת', x:48, y:96, pic:'https://images.unsplash.com/photo-1574104036688-4034870f7f32?w=400', txt:'עיר הנופש הדרומית לחופש ים סוף.' }
];

const Engine = {
    zoomLvl: 1,
    current: null,

    init() {
        const box = document.getElementById('markers');
        DATA.forEach(c => {
            const d = document.createElement('div');
            d.className = 'dot';
            d.style.left = c.x+'%'; d.style.top = c.y+'%';
            d.dataset.label = c.name;
            d.onclick = () => this.go(c);
            box.appendChild(d);
        });
        this.reset();
    },

    go(c) {
        this.current = c;
        this.zoomLvl = 4;
        this.move(c.x, c.y, 4);
        document.getElementById('title').innerText = c.name;
        document.getElementById('info').innerText = c.txt;
        const p = document.getElementById('pic');
        p.style.display = 'block';
        p.style.backgroundImage = `url(${c.pic})`;
    },

    move(x, y, z) {
        document.getElementById('world-map').style.transform = `translate(50vw, 50vh) scale(${z}) translate(-${x}%, -${y}%)`;
    },

    zoom(amt) {
        this.zoomLvl = Math.min(Math.max(this.zoomLvl + amt, 1), 8);
        const target = this.current || {x:50, y:50};
        this.move(target.x, target.y, this.zoomLvl);
    },

    reset() {
        this.current = null; this.zoomLvl = 1;
        this.move(50, 50, 1);
        document.getElementById('title').innerText = "מפת ישראל";
        document.getElementById('info').innerText = "לחץ על נקודה כדי להתחיל";
        document.getElementById('pic').style.display = 'none';
    }
};

window.onload = () => Engine.init();
</script>

</body>
</html>
